---
layout: post
title: Linux常用命令 - 用户管理
date: 2021-01-08
author: 贱子
tags: [Linux]
---

## 用户管理

### 添加用户

```shell
useradd [选项] 用户名
```

**参数说明**

- 选项
  - -d 目录 指定用户主目录，如果此目录不存在，则同时使用-m选项，可以创建主目录
- 用户名：指定新账号的登录名。

增加用户账号就是在`/etc/passwd`文件中为新用户增加一条记录，同时更新其他系统文件如`/etc/shadow, /etc/group`等。

**示例**

```shell
# useradd -d /home/xxx -m xxx
```

### 管理用户密码

用户账号刚创建时没有密码，但是被系统锁定，无法使用，必须为其指定密码后才可以使用，即使是指定空密码。`root`用户可以为自己和其他用户指定口令，普通用户只能用它修改自己的口令。

```shell
passwd [选项] [用户名]
```

**参数说明**

- 选项：只用`root`用户可以使用选项操作
  - -l 锁定密码，即禁用账号
  - -u 密码解锁
  - -d 使账号无密码，不用输入密码，即可登录
  - -f 强迫用户下次登录时修改密码
- 用户名
  - 没有用户名，则表示修改当前用户的密码
  - `root`用户可以修改其他用户的密码

**示例**

```shell
# passwd xxx - 修改密码
# passwd -l xxx - 锁住用户
```

### 删除用户

```sh
userdel [选项] 用户名
```

**参数说明**

- 选项
  - -r 把用户的主目录一起删除

**示例**

```shell
# userdel -r xxx
```

此命令删除用户xxx在系统文件中（主要是`/etc/passwd, /etc/shadow, /etc/group`等）的记录，同时删除用户的主目录。

